!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);var n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},s=function(){function t(t){void 0===t&&(t={}),this.opts=n({},i,t)}return t.prototype.spin=function(t){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),a(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),t&&t.insertBefore(this.el,t.firstChild||null),function(t,e){var o=Math.round(e.corners*e.width*500)/1e3+"px",n="none";!0===e.shadow?n="0 2px 4px #000":"string"==typeof e.shadow&&(n=e.shadow);for(var i=function(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,o=[],n=0,i=t.split(",");n<i.length;n++){var s=i[n],a=s.match(e);if(null!==a){var r=+a[2],l=+a[5],p=a[4],u=a[7];0!==r||p||(p=u),0!==l||u||(u=p),p===u&&o.push({prefix:a[1]||"",x:r,y:l,xUnits:p,yUnits:u,end:a[8]})}}return o}(n),s=0;s<e.lines;s++){var p=~~(360/e.lines*s+e.rotate),u=a(document.createElement("div"),{position:"absolute",top:-e.width/2+"px",width:e.length+e.width+"px",height:e.width+"px",background:r(e.fadeColor,s),borderRadius:o,transformOrigin:"left",transform:"rotate("+p+"deg) translateX("+e.radius+"px)"}),d=s*e.direction/e.lines/e.speed;d-=1/e.speed;var c=a(document.createElement("div"),{width:"100%",height:"100%",background:r(e.color,s),borderRadius:o,boxShadow:l(i,p),animation:1/e.speed+"s linear "+d+"s infinite "+e.animation});u.appendChild(c),t.appendChild(u)}}(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}();function a(t,e){for(var o in e)t.style[o]=e[o];return t}function r(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t,e){for(var o=[],n=0,i=t;n<i.length;n++){var s=i[n],a=p(s.x,s.y,e);o.push(s.prefix+a[0]+s.xUnits+" "+a[1]+s.yUnits+s.end)}return o.join(", ")}function p(t,e,o){var n=o*Math.PI/180,i=Math.sin(n),s=Math.cos(n);return[Math.round(1e3*(t*s+e*i))/1e3,Math.round(1e3*(-t*i+e*s))/1e3]}var u,d,c,h,g,f=[].indexOf;$(function(){var t,e,o,n,i,s,a,r,l,p,h;return o=google.loader.ClientLocation?new google.maps.LatLng(google.loader.ClientLocation.latitude,google.loader.ClientLocation.longitude):new google.maps.LatLng(35.41,139.44),google.maps.visualRefresh=!0,a={zoom:9,center:o,mapTypeId:google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(document.getElementById("map_canvas"),a),s=new google.maps.LatLng(1,1),p=new google.maps.Marker({position:s,map:i,icon:"/static/img/man.png",draggable:!0,visible:!1}),r=new google.maps.Marker({position:s,map:i,draggable:!0,visible:!1}),(n=new google.maps.Polyline({path:[p.getPosition(),r.getPosition()],strokeColor:"#FF0000",strokeOpacity:0,strokeWeight:6})).setMap(i),google.maps.event.addListener(i,"click",t=>p.getVisible()?r.getVisible()?void 0:(r.setPosition(t.latLng),r.setVisible(!0),n.setOptions({strokeOpacity:.6}),$("#azimuth").show(),c(p,r),$("#step2").removeClass("active",500),$("#step3").addClass("active",500)):(p.setPosition(t.latLng),p.setVisible(!0),$("#step1").removeClass("active",500),$("#step2").addClass("active",500))),$([p,r]).each((t,e)=>google.maps.event.addListener(e,"position_changed",()=>(n.setPath([p.getPosition(),r.getPosition()]),document.az=u(p.getPosition(),r.getPosition()),$("#azimuth").text(document.az.round(2)+"ยบ"),$("#results").html("")))),$([p,r]).each((t,e)=>google.maps.event.addListener(e,"dragend",()=>c(p,r))),$("#reset").click(function(){return p.setOptions({position:s,visible:!1}),r.setOptions({position:s,visible:!1}),n.setOptions({strokeOpacity:0}),$("#step1").addClass("active",500),$("#step2").removeClass("active",500),$("#step3").removeClass("active",500),$("#azimuth").hide(),$("#results").html(""),window.location.hash=""}),e=d(),f.call(Object.keys(e),"pov")>=0&&f.call(Object.keys(e),"poi")>=0?(h=g(e.pov),l=g(e.poi),p.setPosition(h),r.setPosition(l),p.setVisible(!0),r.setVisible(!0),n.setOptions({strokeOpacity:.6}),(t=new google.maps.LatLngBounds).extend(h),t.extend(l),i.fitBounds(t),$("#step1").removeClass("active",500),$("#step3").addClass("active",500),$("#azimuth").show(),c(p,r)):navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>(o=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),i.panTo(o))):void 0}),u=function(t,e){var o,n,i,s,a;return i=t.lat().toRad(),n=e.lat().toRad(),o=(e.lng()-t.lng()).toRad(),a=Math.sin(o)*Math.cos(n),s=Math.cos(i)*Math.sin(n)-Math.sin(i)*Math.cos(n)*Math.cos(o),Math.atan2(a,s).toBrng()},h=function(t,e){var o,n;return n=t.getPosition().toUrlValue(),o=e.getPosition().toUrlValue(),window.location.hash=`pov=${n}&poi=${o}`},d=function(){var t;return t={},window.location.hash.replace(/[#&]+([^=&]+)=([^&]*)/gi,(e,o,n)=>t[o]=n),t},g=function(t){var e;return e=t.split(","),new google.maps.LatLng(e[0],e[1])},c=function(t,e){var o;return document.spinner=new s({lines:13,length:7,width:4,radius:10,rotate:0,color:"#333",speed:1,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9,top:"50%",left:"50%"}).spin($("#results")[0]),_gaq.push(["_trackEvent","Interaction","Request"]),o=t.getPosition().lat().round(1),$.ajax({type:"POST",url:"/findMatch",data:{lat:o,az:document.az},dataType:"json",success:t=>{var e,o,n,i,s;if(null!=t.matches){for(o=$("<ul>").addClass("matches"),n=0,i=(s=t.matches).length;n<i;n++)e=s[n],o.append($("<li>").text(e));return $("#results").text(`${t.suntype} on:`).append(o),_gaq.push(["_trackEvent","Interaction","Success",t.suntype])}return $("#results").text(`Sorry, there is no ${t.suntype} in this direction.`),_gaq.push(["_trackEvent","Interaction","Success","Out of Bounds"])},error:()=>($("#results").text("ERROR in the Request."),_gaq.push(["_trackEvent","Interaction","Error"])),complete:()=>(document.spinner.stop(),h(t,e))})},Number.prototype.toRad=function(){return this*Math.PI/180},Number.prototype.toDeg=function(){return 180*this/Math.PI},Number.prototype.toBrng=function(){return(this.toDeg()+360)%360},Number.prototype.round=function(t){return Math.round(this*Math.pow(10,t))/Math.pow(10,t)}}]);
//# sourceMappingURL=bundle.js.map